# Telegram Bot for Service Requests

Этот проект представляет собой Telegram-бота, который позволяет пользователям делать заказ или заказывать звонок через интерфейс Telegram. Бот запрашивает у пользователя имя, номер телефона, а затем отправляет данные на внешний сервер.

## Функциональность

- Кнопка **"Сделать заказ"** перенаправляет пользователя на страницу услуг.
- Кнопка **"Заказать звонок"** инициирует сбор данных о пользователе:
  - Имя
  - Номер телефона (с проверкой корректности)
- Все данные отправляются на сервер с помощью API.
- Поддержка обработки ошибок и валидации ввода данных.
  
## Структура проекта

```markdown
telegram_bot/
│
├── main.py                # Основной файл для запуска бота
├── config.py              # Файл с конфигурацией, включая токен
├── .env                   # Файл с конфиденциальными данными (не включен в репозиторий)
├── handlers/
│   ├── start.py           # Обработчик команды /start
│   ├── buttons.py         # Обработчик нажатий на кнопки
│   └── messages.py        # Обработчик сообщений от пользователей
│
├── utils/
│   ├── validation.py      # Функции валидации (телефон и т.д.)
│   ├── api.py             # Функции для работы с API (отправка заявок)
│   └── logger.py          # Логирование
│
├── .gitignore             # Файл для игнорирования конфиденциальных данных и лишних файлов
└── requirements.txt       # Список зависимостей
```

## Установка

### 1. Склонируйте репозиторий

```bash
git clone https://github.com/NjemTop/tg_bot_svc.git
cd tg_bot_svc
```

### 2. Установите зависимости

Убедитесь, что у вас установлен Python 3.7+ и выполните команду для установки зависимостей:

```bash
pip install -r requirements.txt
```

### 3. Настройте переменные окружения

Создайте файл .env в корне проекта:

```bash
touch .env
```

Внутри файла .env добавьте ваш токен Telegram-бота и URL для отправки данных:

```bash
TELEGRAM_BOT_TOKEN=ваш_токен_бота
API_URL=https://api-url.ru/callback
```

### 4. Запуск бота

Запустите бота командой:

```bash
python main.py
```

## Как работает бот

1. **Команда /start**: После ввода команды `/start`, пользователю предлагаются две кнопки:
   - "Сделать заказ" — перенаправляет на страницу услуг.
   - "Заказать звонок" — инициирует процесс сбора данных.

2. **Процесс заказа звонка**:
   - Бот последовательно запрашивает имя, номер телефона.
   - Для телефона добавлена проверка корректности:
     - Номер телефона должен содержать от 10 до 15 цифр и может начинаться с '+'.
   - После ввода данных бот отправляет их на сервер через API.

3. **Валидация данных**:
   - В случае неправильного формата номера телефона, бот выводит сообщение с информацией о том, какой формат должен быть использован.


## Логирование

В проекте реализовано базовое логирование через модуль logging. Логи выводятся в консоль для отслеживания ошибок и действий пользователя.

## Переменные окружения

В проекте используется файл .env для хранения конфиденциальных данных, таких как токен бота и URL API. Этот файл добавлен в .gitignore, чтобы исключить его из репозитория.

## Зависимости

Все зависимости указаны в файле `requirements.txt`:
